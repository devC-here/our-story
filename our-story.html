<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Story ğŸ’œ</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Playfair+Display:ital,wght@0,400;1,400&family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">
<style>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   RESET & ROOT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root{
  --p0:#07001a; --p1:#1a0030; --p2:#3d0060;
  --p3:#7200a8; --p4:#b040d8; --p5:#d880f8; --pg:#f0c8ff;
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;overflow:hidden;}
body{background:var(--p0);color:#fff;font-family:'Cormorant Garamond',serif;}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CANVAS (floating hearts BG)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#bg-canvas{position:fixed;inset:0;z-index:0;pointer-events:none;}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   VIEWS  (lock / journey / admin)
   only one visible at a time
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.view{position:fixed;inset:0;z-index:10;display:none;}
.view.active{display:flex;}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â¶  LOCK SCREEN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#v-lock{
  flex-direction:column;align-items:center;justify-content:center;
  text-align:center;padding:32px 24px;
  background:radial-gradient(ellipse at 50% 40%,rgba(90,0,150,.5) 0%,transparent 65%);
  animation:fadeIn .8s ease;
}
.lock-heart{
  font-size:72px;display:block;margin-bottom:18px;
  filter:drop-shadow(0 0 32px rgba(200,80,255,1));
  animation:hb 1.9s ease-in-out infinite;
}
@keyframes hb{0%,100%{transform:scale(1);}40%{transform:scale(1.18);}60%{transform:scale(1.06);}}
.lock-title{
  font-family:'Playfair Display',serif;font-style:italic;
  font-size:clamp(2.2rem,7vw,4rem);
  text-shadow:0 0 40px rgba(200,80,255,.85);margin-bottom:8px;
}
.lock-sub{font-size:1.1rem;font-style:italic;color:var(--p5);margin-bottom:48px;}
.pin-dots{display:flex;gap:18px;justify-content:center;margin-bottom:30px;}
.pin-dot{
  width:14px;height:14px;border-radius:50%;
  border:2px solid rgba(170,70,255,.45);transition:all .2s;
}
.pin-dot.on{background:var(--p4);border-color:var(--p4);box-shadow:0 0 14px rgba(170,70,255,1);}
.keypad{display:grid;grid-template-columns:repeat(3,72px);gap:12px;justify-content:center;}
.kbtn{
  width:72px;height:72px;border-radius:50%;
  border:1px solid rgba(170,70,255,.28);background:rgba(70,0,120,.3);
  backdrop-filter:blur(10px);color:#fff;
  font-family:'Cormorant Garamond',serif;font-size:1.75rem;
  cursor:pointer;transition:all .15s;
  display:flex;align-items:center;justify-content:center;
}
.kbtn:active{background:rgba(120,0,180,.55);transform:scale(.92);box-shadow:0 0 22px rgba(170,70,255,.7);}
.pin-err{margin-top:18px;font-style:italic;color:#ff99bb;min-height:22px;font-size:.95rem;}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â·  JOURNEY VIEW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#v-journey{flex-direction:column;background:var(--p0);}

/* top strip */
.journey-bar{
  flex-shrink:0;display:flex;align-items:center;justify-content:space-between;
  padding:10px 20px;
  background:rgba(10,0,22,.75);backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(170,70,255,.12);
  z-index:20;
}
.jb-logo{font-family:'Dancing Script',cursive;font-size:1.25rem;color:var(--pg);}
.jb-dots{display:flex;gap:7px;align-items:center;}
.jb-dot{
  width:9px;height:9px;border-radius:50%;
  background:rgba(170,70,255,.2);transition:all .4s;
}
.jb-dot.done{background:var(--p4);box-shadow:0 0 7px rgba(170,70,255,.8);}
.jb-dot.current{background:var(--pg);box-shadow:0 0 14px rgba(240,200,255,1);transform:scale(1.4);}
.jb-lock{
  font-size:.7rem;letter-spacing:2px;text-transform:uppercase;
  color:rgba(200,150,255,.55);background:rgba(40,0,65,.4);
  border:1px solid rgba(170,70,255,.18);padding:6px 14px;
  border-radius:50px;cursor:pointer;transition:all .2s;
}
.jb-lock:hover{color:var(--pg);border-color:rgba(170,70,255,.5);}

/* chapter iframe area */
.chapter-stage{
  flex:1;position:relative;overflow:hidden;
}
.chapter-frame{
  position:absolute;inset:0;width:100%;height:100%;
  border:none;background:transparent;
  transition:opacity .5s ease, transform .5s ease;
}
.chapter-frame.hidden{opacity:0;transform:translateY(30px);pointer-events:none;}
.chapter-frame.visible{opacity:1;transform:translateY(0);}

/* unlock bar â€” sits at bottom of journey */
.unlock-bar{
  flex-shrink:0;
  background:rgba(10,0,22,.9);backdrop-filter:blur(18px);
  border-top:1px solid rgba(170,70,255,.15);
  padding:14px 20px;display:flex;align-items:center;gap:10px;
  z-index:20;
}
.unlock-bar.hidden{display:none;}
.ub-label{
  font-size:.72rem;letter-spacing:2px;text-transform:uppercase;
  color:rgba(200,150,255,.55);white-space:nowrap;
}
.ub-input{
  flex:1;background:rgba(255,255,255,.07);
  border:1px solid rgba(170,70,255,.22);border-radius:8px;
  padding:9px 14px;color:#fff;
  font-family:'Dancing Script',cursive;font-size:1.2rem;
  outline:none;transition:all .3s;min-width:0;
}
.ub-input::placeholder{color:rgba(255,255,255,.2);font-style:italic;}
.ub-input:focus{border-color:rgba(170,70,255,.55);box-shadow:0 0 0 3px rgba(170,70,255,.1);}
.ub-btn{
  flex-shrink:0;padding:9px 20px;
  background:linear-gradient(135deg,var(--p2),var(--p3));
  border:none;border-radius:8px;color:#fff;
  font-family:'Cormorant Garamond',serif;font-size:.82rem;
  letter-spacing:2px;text-transform:uppercase;cursor:pointer;
  transition:all .3s;white-space:nowrap;
  box-shadow:0 3px 16px rgba(100,0,160,.4);
}
.ub-btn:hover{transform:translateY(-1px);box-shadow:0 6px 22px rgba(100,0,160,.6);}
.ub-err{
  position:absolute;bottom:100%;left:50%;transform:translateX(-50%);
  background:rgba(20,0,40,.95);border:1px solid rgba(255,80,120,.3);
  border-radius:8px;padding:7px 16px;
  font-style:italic;font-size:.88rem;color:#ff99bb;white-space:nowrap;
  pointer-events:none;
  animation:fadeIn .25s ease;
}

/* "last chapter â€” all done" button */
.ub-finish{
  width:100%;padding:12px;
  background:linear-gradient(135deg,var(--p2),var(--p3));
  border:none;border-radius:8px;color:#fff;
  font-family:'Cormorant Garamond',serif;font-size:.88rem;
  letter-spacing:3px;text-transform:uppercase;cursor:pointer;
  transition:all .3s;box-shadow:0 3px 16px rgba(100,0,160,.4);
}
.ub-finish:hover{transform:translateY(-1px);}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â¸  FINAL SCREEN (after last chapter)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#v-final{
  flex-direction:column;align-items:center;justify-content:center;
  text-align:center;padding:40px 24px;
  background:radial-gradient(ellipse at 50% 50%,rgba(100,0,160,.5) 0%,transparent 65%);
  animation:fadeIn .8s ease;
}
.final-heart{font-size:80px;filter:drop-shadow(0 0 40px rgba(200,80,255,1));animation:hb 1.9s ease-in-out infinite;}
.final-title{
  font-family:'Playfair Display',serif;font-style:italic;
  font-size:clamp(1.8rem,5vw,3.2rem);
  text-shadow:0 0 48px rgba(200,80,255,.9);margin:20px 0 12px;
}
.final-msg{
  font-size:1.1rem;font-style:italic;color:var(--p5);
  max-width:440px;line-height:1.8;margin-bottom:32px;
}
.final-sig{font-family:'Dancing Script',cursive;font-size:1.7rem;color:var(--p5);margin-bottom:36px;}
.final-back{
  font-size:.75rem;letter-spacing:3px;text-transform:uppercase;
  color:rgba(200,150,255,.5);background:rgba(40,0,65,.35);
  border:1px solid rgba(170,70,255,.18);padding:9px 22px;
  border-radius:50px;cursor:pointer;transition:all .2s;
}
.final-back:hover{color:var(--pg);border-color:rgba(170,70,255,.5);}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â¹  ADMIN VIEW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#v-admin{
  flex-direction:column;background:rgba(7,0,18,.98);
  overflow-y:auto;
}
.adm-top{
  flex-shrink:0;display:flex;align-items:center;justify-content:space-between;
  padding:14px 24px;background:rgba(10,0,22,.9);backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(170,70,255,.12);position:sticky;top:0;z-index:50;
}
.adm-logo{font-family:'Playfair Display',serif;font-style:italic;font-size:1.4rem;color:var(--pg);}
.adm-btns{display:flex;gap:9px;}
.adm-btn{
  font-size:.7rem;letter-spacing:2px;text-transform:uppercase;
  color:rgba(200,150,255,.65);background:rgba(40,0,65,.4);
  border:1px solid rgba(170,70,255,.2);padding:7px 15px;
  border-radius:50px;cursor:pointer;transition:all .2s;
}
.adm-btn:hover{color:var(--pg);border-color:rgba(170,70,255,.5);}

.adm-body{max-width:840px;width:100%;margin:0 auto;padding:28px 22px 70px;}

/* card */
.gc{
  background:rgba(28,0,52,.6);border:1px solid rgba(170,70,255,.16);
  border-radius:16px;padding:28px 32px;backdrop-filter:blur(20px);
  box-shadow:0 8px 48px rgba(0,0,0,.35),inset 0 1px 0 rgba(170,70,255,.1);
  margin-bottom:22px;
}
.gc-title{
  font-size:.68rem;letter-spacing:3px;text-transform:uppercase;
  color:var(--p5);display:flex;align-items:center;gap:10px;margin-bottom:20px;
}
.gc-title::after{content:'';flex:1;height:1px;background:rgba(170,70,255,.16);}

label.fl{display:block;font-size:.68rem;letter-spacing:2px;text-transform:uppercase;color:rgba(200,150,255,.7);margin-bottom:6px;}
.fg{margin-bottom:16px;}
.row2{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
input[type=text],input[type=number],select{
  width:100%;background:rgba(255,255,255,.06);
  border:1px solid rgba(170,70,255,.2);border-radius:8px;
  padding:10px 14px;color:#fff;
  font-family:'Cormorant Garamond',serif;font-size:1rem;
  outline:none;transition:all .3s;
}
select option{background:#1a0030;}
input::placeholder{color:rgba(255,255,255,.2);font-style:italic;}
input:focus,select:focus{border-color:rgba(170,70,255,.55);box-shadow:0 0 0 3px rgba(170,70,255,.1);}

/* HTML textarea â€” big, monospaced */
.html-area{
  width:100%;background:rgba(0,0,0,.45);
  border:1px solid rgba(170,70,255,.2);border-radius:8px;
  padding:14px 16px;color:#e8d0ff;
  font-family:'Courier New',monospace;font-size:.82rem;line-height:1.65;
  outline:none;transition:border-color .3s;resize:vertical;min-height:280px;
}
.html-area::placeholder{color:rgba(255,255,255,.15);font-style:italic;}
.html-area:focus{border-color:rgba(170,70,255,.55);box-shadow:0 0 0 3px rgba(170,70,255,.1);}

.save-btn{
  width:100%;padding:14px;
  background:linear-gradient(135deg,var(--p2),var(--p3));
  border:none;border-radius:10px;color:#fff;
  font-family:'Cormorant Garamond',serif;font-size:.88rem;
  letter-spacing:3px;text-transform:uppercase;cursor:pointer;
  transition:all .3s;box-shadow:0 4px 20px rgba(100,0,160,.4);margin-top:4px;
}
.save-btn:hover{transform:translateY(-2px);box-shadow:0 8px 28px rgba(100,0,160,.6);}
.toast-msg{text-align:center;padding:10px;font-style:italic;font-size:.9rem;color:var(--p5);display:none;}

/* chapter list */
.ch-list{display:flex;flex-direction:column;gap:10px;}
.ch-item{
  background:rgba(28,0,52,.45);border:1px solid rgba(170,70,255,.13);
  border-radius:12px;padding:14px 18px;
  display:flex;justify-content:space-between;align-items:center;gap:12px;
  transition:border-color .2s;
}
.ch-item:hover{border-color:rgba(170,70,255,.33);}
.chi-left .num{font-size:.65rem;letter-spacing:3px;text-transform:uppercase;color:var(--p4);margin-bottom:2px;}
.chi-left .ttl{font-family:'Playfair Display',serif;font-style:italic;font-size:.96rem;}
.chi-left .meta{font-size:.75rem;color:rgba(200,150,255,.5);margin-top:2px;}
.chi-btns{display:flex;gap:7px;flex-shrink:0;}
.chi-btn{
  background:none;border:1px solid rgba(170,70,255,.18);color:rgba(200,150,255,.6);
  padding:5px 12px;border-radius:6px;font-family:'Cormorant Garamond',serif;
  font-size:.76rem;cursor:pointer;transition:all .2s;
}
.chi-btn:hover{border-color:rgba(170,70,255,.5);color:var(--pg);}
.chi-btn.del:hover{border-color:#ff6688;color:#ff6688;}
.chi-btn.edit-btn{background:rgba(60,0,100,.3);}

/* helper tip box */
.tip-box{
  background:rgba(40,0,80,.3);border:1px solid rgba(170,70,255,.15);
  border-radius:10px;padding:16px 18px;margin-bottom:18px;
  font-size:.85rem;line-height:1.75;color:rgba(200,160,255,.7);
}
.tip-box code{
  background:rgba(100,0,160,.3);padding:2px 6px;border-radius:4px;
  font-family:'Courier New',monospace;font-size:.8rem;color:#d8aaff;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PAGE-TURN FLASH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#page-turn{
  position:fixed;inset:0;z-index:500;pointer-events:none;
  background:radial-gradient(ellipse at center,rgba(120,0,200,.92),rgba(8,0,20,1));
  opacity:0;transition:opacity .3s ease;
}
#page-turn.on{opacity:1;}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MISC
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
@keyframes shake{0%,100%{transform:translateX(0);}25%{transform:translateX(-8px);}75%{transform:translateX(8px);}}
::-webkit-scrollbar{width:4px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:rgba(170,70,255,.3);border-radius:2px;}

.cf{
  position:fixed;z-index:999;pointer-events:none;border-radius:2px;
  animation:cfFall linear forwards;
}
@keyframes cfFall{0%{opacity:1;transform:translateY(0) rotate(0);}100%{opacity:0;transform:translateY(80vh) rotate(720deg);}}
</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>
<div id="page-turn"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â¶  LOCK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="v-lock" class="view active">
  <span class="lock-heart">ğŸ’œ</span>
  <h1 class="lock-title">Our Story</h1>
  <p class="lock-sub">A journey written just for you</p>
  <div class="pin-dots">
    <div class="pin-dot" id="d0"></div>
    <div class="pin-dot" id="d1"></div>
    <div class="pin-dot" id="d2"></div>
    <div class="pin-dot" id="d3"></div>
  </div>
  <div class="keypad">
    <button class="kbtn" onclick="kp('1')">1</button>
    <button class="kbtn" onclick="kp('2')">2</button>
    <button class="kbtn" onclick="kp('3')">3</button>
    <button class="kbtn" onclick="kp('4')">4</button>
    <button class="kbtn" onclick="kp('5')">5</button>
    <button class="kbtn" onclick="kp('6')">6</button>
    <button class="kbtn" onclick="kp('7')">7</button>
    <button class="kbtn" onclick="kp('8')">8</button>
    <button class="kbtn" onclick="kp('9')">9</button>
    <div></div>
    <button class="kbtn" onclick="kp('0')">0</button>
    <button class="kbtn" onclick="kd()" style="font-size:1.1rem">âŒ«</button>
  </div>
  <div class="pin-err" id="pin-err"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â·  JOURNEY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="v-journey" class="view">

  <div class="journey-bar">
    <div class="jb-logo">Our Story ğŸ’œ</div>
    <div class="jb-dots" id="jb-dots"></div>
    <button class="jb-lock" onclick="goLock()">ğŸ”’ Lock</button>
  </div>

  <div class="chapter-stage" id="chapter-stage">
    <!-- iframes injected here -->
  </div>

  <div class="unlock-bar" id="unlock-bar">
    <span class="ub-label">Password</span>
    <input class="ub-input" id="ub-input" placeholder="Type hereâ€¦"
      onkeydown="if(event.key==='Enter') tryUnlock()"/>
    <button class="ub-btn" onclick="tryUnlock()">ğŸ’œ Unlock</button>
  </div>

</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â¸  FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="v-final" class="view">
  <div style="max-width:500px;">
    <div class="final-heart">ğŸ’œ</div>
    <h2 class="final-title">You've reached the end of our storyâ€¦ for now.</h2>
    <p class="final-msg">Every chapter was written with every piece of love I have. Thank you for being my whole world.</p>
    <p class="final-sig">â€” Forever yours ğŸ’œ</p>
    <button class="final-back" onclick="rereadFromStart()">â†© Read from the beginning</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â¹  ADMIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="v-admin" class="view">
  <div class="adm-top">
    <div class="adm-logo">Admin Panel ğŸ’œ</div>
    <div class="adm-btns">
      <button class="adm-btn" onclick="goJourney()">ğŸ’œ Preview Journey</button>
      <button class="adm-btn" onclick="goLock()">ğŸ”’ Lock</button>
    </div>
  </div>
  <div class="adm-body">

    <!-- HOW TO USE -->
    <div class="gc">
      <div class="gc-title">How it works</div>
      <div class="tip-box">
        Each chapter is a <strong>full custom HTML page</strong> you write yourself â€” any design, animation, font, image, poem, caricature, anything.<br><br>
        You set a <strong>password</strong> per chapter. When she finishes reading, she types that password into the bar at the bottom to unlock the next chapter.<br><br>
        <strong>Tips for writing chapters:</strong><br>
        â€¢ Write a complete <code>&lt;!DOCTYPE html&gt;</code> page â€” full freedom.<br>
        â€¢ Use inline CSS &amp; JS inside your HTML â€” no external files needed.<br>
        â€¢ Keep the page <strong>scroll-friendly</strong> so she can read everything.<br>
        â€¢ The password bar sits outside your page so you don't need to add it.<br>
        â€¢ Chapters play in order 1 â†’ 2 â†’ 3 â€¦ â†’ 10.
      </div>
    </div>

    <!-- EDITOR -->
    <div class="gc">
      <div class="gc-title" id="editor-title">Add / Edit Chapter</div>

      <div class="row2">
        <div class="fg">
          <label class="fl">Chapter Number (1â€“10)</label>
          <input type="number" id="a-num" min="1" max="10" placeholder="e.g. 1"/>
        </div>
        <div class="fg">
          <label class="fl">Chapter Title (shown in admin)</label>
          <input type="text" id="a-title" placeholder="The night we first talkedâ€¦"/>
        </div>
      </div>

      <div class="row2">
        <div class="fg">
          <label class="fl">Unlock Password (she types this)</label>
          <input type="text" id="a-pass" placeholder="e.g.  forever  or  june14"/>
        </div>
        <div class="fg">
          <label class="fl">Password Hint (shown in bar)</label>
          <input type="text" id="a-hint" placeholder="Hint: the month we metâ€¦"/>
        </div>
      </div>

      <div class="fg">
        <label class="fl">Your Full Chapter HTML</label>
        <textarea class="html-area" id="a-html"
          placeholder="<!DOCTYPE html>&#10;<html>&#10;<head>&#10;  <style>&#10;    /* your styles */&#10;  </style>&#10;</head>&#10;<body>&#10;  <!-- Your full romantic page here -->&#10;</body>&#10;</html>"></textarea>
      </div>

      <button class="save-btn" onclick="saveChapter()">ğŸ’œ &nbsp;Save Chapter</button>
      <div class="toast-msg" id="adm-toast"></div>
    </div>

    <!-- CHAPTER LIST -->
    <div class="gc-title" style="font-size:.68rem;letter-spacing:3px;text-transform:uppercase;color:var(--p5);display:flex;align-items:center;gap:10px;margin-bottom:16px;">
      Saved Chapters
      <span style="flex:1;height:1px;background:rgba(170,70,255,.16);display:block;"></span>
    </div>

    <div class="ch-list" id="ch-list"></div>

    <div style="margin-top:22px;text-align:center;">
      <button class="chi-btn" onclick="resetProgress()" style="padding:9px 22px;font-size:.76rem;">
        â†© Reset her progress to Chapter 1
      </button>
    </div>

  </div>
</div>


<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â˜…  CHANGE YOUR PINs HERE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const HER_PIN   = '1234';   // â† her PIN to read the story
const ADMIN_PIN = '0000';   // â† your PIN to write/manage chapters

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let chapters = JSON.parse(localStorage.getItem('os2-chapters') || '[]');
let progress = parseInt(localStorage.getItem('os2-progress')  || '1');
let pin = '';
let currentCh = 1;           // which chapter is currently showing
let editingNum = null;        // null = new, number = editing existing

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATED BG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function(){
  const cv=document.getElementById('bg-canvas');
  const ctx=cv.getContext('2d');
  let W,H,hearts=[];
  function resize(){ W=cv.width=innerWidth; H=cv.height=innerHeight; }
  resize(); window.addEventListener('resize',resize);
  function mk(){ return{x:Math.random()*W,y:H+30,s:8+Math.random()*18,sp:.3+Math.random()*.7,op:0,mo:.1+Math.random()*.16,dx:(Math.random()-.5)*.35}; }
  for(let i=0;i<14;i++){const h=mk();h.y=Math.random()*H;hearts.push(h);}
  function dh(x,y,s,a){
    ctx.save();ctx.globalAlpha=a;ctx.fillStyle='#bb44ee';ctx.shadowColor='#aa33dd';ctx.shadowBlur=10;
    ctx.beginPath();ctx.moveTo(x,y+s*.25);
    ctx.bezierCurveTo(x,y,x-s,y,x-s,y+s*.4);
    ctx.bezierCurveTo(x-s,y+s*.75,x,y+s*.9,x,y+s);
    ctx.bezierCurveTo(x,y+s*.9,x+s,y+s*.75,x+s,y+s*.4);
    ctx.bezierCurveTo(x+s,y,x,y,x,y+s*.25);
    ctx.fill();ctx.restore();
  }
  function tick(){
    ctx.clearRect(0,0,W,H);
    hearts.forEach((h,i)=>{
      h.y-=h.sp;h.x+=h.dx;h.age=(h.age||0)+1;
      if(h.age<50)h.op=Math.min(h.mo,h.op+.003);
      if(h.y<-80)hearts[i]=mk();
      dh(h.x,h.y,h.s,h.op);
    });
    requestAnimationFrame(tick);
  }
  tick();
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function kp(d){
  if(pin.length>=4)return;
  pin+=d; dots();
  if(pin.length===4) setTimeout(checkPin,200);
}
function kd(){ pin=pin.slice(0,-1); dots(); document.getElementById('pin-err').textContent=''; }
function dots(){ for(let i=0;i<4;i++) document.getElementById('d'+i).classList.toggle('on',i<pin.length); }
function checkPin(){
  if(pin===HER_PIN)        { flash(()=>goJourney()); }
  else if(pin===ADMIN_PIN) { flash(()=>goAdmin());   }
  else {
    const e=document.getElementById('pin-err');
    e.textContent='Try again, my love ğŸ’œ';
    e.style.animation='none'; void e.offsetWidth; e.style.animation='shake .4s ease';
    pin=''; dots();
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIEW SWITCHING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showView(id){
  document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function flash(cb){
  const pt=document.getElementById('page-turn');
  pt.classList.add('on');
  setTimeout(()=>{ if(cb)cb(); pt.classList.remove('on'); },320);
}
function goLock()  { pin=''; dots(); document.getElementById('pin-err').textContent=''; flash(()=>showView('v-lock')); }
function goAdmin() { renderChapterList(); flash(()=>showView('v-admin')); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   JOURNEY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function goJourney(){
  currentCh = progress >= 1 ? progress : 1;
  showView('v-journey');
  renderDots();
  loadChapter(currentCh);
}

function renderDots(){
  const el=document.getElementById('jb-dots');
  el.innerHTML='';
  for(let i=1;i<=10;i++){
    const d=document.createElement('div');
    d.className='jb-dot'+(i<currentCh?' done':i===currentCh?' current':'');
    el.appendChild(d);
  }
}

function loadChapter(num){
  currentCh=num;
  renderDots();

  const ch=chapters.find(c=>c.num===num);
  const stage=document.getElementById('chapter-stage');

  // remove old frame
  const old=document.getElementById('active-frame');
  if(old) old.remove();

  // create iframe
  const iframe=document.createElement('iframe');
  iframe.id='active-frame';
  iframe.className='chapter-frame hidden';
  iframe.setAttribute('sandbox','allow-scripts allow-same-origin');
  stage.appendChild(iframe);

  if(!ch){
    // chapter not written yet
    iframe.srcdoc=`<!DOCTYPE html><html><head>
      <style>
        body{margin:0;min-height:100vh;display:flex;flex-direction:column;
          align-items:center;justify-content:center;text-align:center;
          background:radial-gradient(ellipse at 50% 40%,#2a0045 0%,#08001a 100%);
          font-family:'Cormorant Garamond',serif;color:#fff;padding:32px;}
        h2{font-family:'Playfair Display',serif;font-style:italic;font-size:2rem;
          color:rgba(200,150,255,.5);margin-bottom:16px;}
        p{font-style:italic;color:rgba(200,150,255,.35);font-size:1.1rem;}
      </style>
    </head><body>
      <h2>Chapter ${num}</h2>
      <p>This chapter hasn't been written yetâ€¦<br>Check back soon ğŸ’œ</p>
    </body></html>`;
  } else {
    iframe.srcdoc = ch.html;
  }

  // show iframe after tiny delay
  setTimeout(()=>{ iframe.classList.remove('hidden'); iframe.classList.add('visible'); },50);

  // set up unlock bar
  setupUnlockBar(num, ch);
}

function setupUnlockBar(num, ch){
  const bar   = document.getElementById('unlock-bar');
  const input = document.getElementById('ub-input');

  // remove old error
  const oldErr=bar.querySelector('.ub-err');
  if(oldErr) oldErr.remove();

  input.value='';

  const isLast = (num===10) || (!chapters.find(c=>c.num===num+1) && num===chapters[chapters.length-1]?.num);

  if(!ch){
    // no chapter â€” just show a "coming soon" note, no bar
    bar.innerHTML=`<span style="width:100%;text-align:center;font-style:italic;color:rgba(200,150,255,.4);font-size:.9rem;">This chapter hasn't been written yet</span>`;
    bar.classList.remove('hidden');
    return;
  }

  if(isLast){
    // last chapter â€” show finish button
    bar.innerHTML=`<button class="ub-finish" onclick="finishStory()">ğŸ‰ Finish our story ğŸ’œ</button>`;
    bar.classList.remove('hidden');
    return;
  }

  // normal chapter with password
  bar.innerHTML=`
    <span class="ub-label">${ch.hint ? 'ğŸ’œ '+esc(ch.hint) : 'Password'}</span>
    <input class="ub-input" id="ub-input" placeholder="Type hereâ€¦"
      onkeydown="if(event.key==='Enter') tryUnlock()"/>
    <button class="ub-btn" onclick="tryUnlock()">ğŸ’œ Unlock</button>
  `;
  bar.classList.remove('hidden');
}

function tryUnlock(){
  const input=document.getElementById('ub-input');
  if(!input)return;
  const val=(input.value||'').trim().toLowerCase();
  const ch=chapters.find(c=>c.num===currentCh);

  if(!ch)return;

  const bar=document.getElementById('unlock-bar');
  // remove previous error
  const oldErr=bar.querySelector('.ub-err');
  if(oldErr)oldErr.remove();

  if(val===ch.password.toLowerCase()){
    // correct!
    confetti();
    const next=currentCh+1;
    if(next>progress){ progress=next; localStorage.setItem('os2-progress',String(progress)); }
    flash(()=>loadChapter(next));
  } else {
    // wrong â€” show floating error
    const err=document.createElement('div');
    err.className='ub-err';
    err.textContent='Not quiteâ€¦ try again ğŸ’œ';
    bar.style.position='relative';
    bar.appendChild(err);
    setTimeout(()=>err.remove(),2500);
    input.value='';
    input.focus();
  }
}

function finishStory(){
  confetti();
  if(progress<11){ progress=11; localStorage.setItem('os2-progress','11'); }
  flash(()=>showView('v-final'));
}

function rereadFromStart(){
  progress=1;
  localStorage.setItem('os2-progress','1');
  flash(()=>goJourney());
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADMIN â€” save / edit / delete
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function saveChapter(){
  const num=parseInt(document.getElementById('a-num').value);
  if(isNaN(num)||num<1||num>10){ alert('Chapter must be 1â€“10'); return; }

  const title   =document.getElementById('a-title').value.trim();
  const password=(document.getElementById('a-pass').value.trim()).toLowerCase();
  const hint    =document.getElementById('a-hint').value.trim();
  const html    =document.getElementById('a-html').value.trim();

  if(!title)   { alert('Add a chapter title'); return; }
  if(!password){ alert('Add an unlock password'); return; }
  if(!html)    { alert('Paste your chapter HTML'); return; }

  const ch={num,title,password,hint,html};

  const idx=chapters.findIndex(c=>c.num===num);
  if(idx>=0) chapters[idx]=ch; else chapters.push(ch);
  chapters.sort((a,b)=>a.num-b.num);

  localStorage.setItem('os2-chapters',JSON.stringify(chapters));

  // clear form
  document.getElementById('a-num').value='';
  document.getElementById('a-title').value='';
  document.getElementById('a-pass').value='';
  document.getElementById('a-hint').value='';
  document.getElementById('a-html').value='';
  editingNum=null;
  document.getElementById('editor-title').textContent='Add / Edit Chapter';

  renderChapterList();
  showToast('adm-toast','Chapter '+num+' saved ğŸ’œ');
}

function editChapter(num){
  const ch=chapters.find(c=>c.num===num);
  if(!ch)return;
  editingNum=num;
  document.getElementById('a-num').value=ch.num;
  document.getElementById('a-title').value=ch.title;
  document.getElementById('a-pass').value=ch.password;
  document.getElementById('a-hint').value=ch.hint||'';
  document.getElementById('a-html').value=ch.html;
  document.getElementById('editor-title').textContent='Editing Chapter '+num;
  // scroll to editor
  document.getElementById('v-admin').scrollTo({top:0,behavior:'smooth'});
}

function deleteChapter(num){
  if(!confirm('Delete Chapter '+num+' forever?'))return;
  chapters=chapters.filter(c=>c.num!==num);
  if(progress>num){ progress=num; localStorage.setItem('os2-progress',String(progress)); }
  localStorage.setItem('os2-chapters',JSON.stringify(chapters));
  renderChapterList();
  showToast('adm-toast','Chapter '+num+' deleted');
}

function resetProgress(){
  if(!confirm('Reset her progress back to Chapter 1?'))return;
  progress=1;
  localStorage.setItem('os2-progress','1');
  showToast('adm-toast','Progress reset to Chapter 1 ğŸ’œ');
}

function renderChapterList(){
  const el=document.getElementById('ch-list');
  if(!chapters.length){
    el.innerHTML=`<p style="font-style:italic;color:rgba(200,150,255,.35);text-align:center;padding:28px 0;">
      No chapters yet â€” write your first one above
    </p>`;
    return;
  }
  el.innerHTML=chapters.map(c=>`
    <div class="ch-item">
      <div class="chi-left">
        <div class="num">Chapter ${c.num}</div>
        <div class="ttl">${esc(c.title)}</div>
        <div class="meta">Password: <span style="color:rgba(220,180,255,.8);">${esc(c.password)}</span>
          ${c.hint?' Â· Hint: '+esc(c.hint):''}</div>
      </div>
      <div class="chi-btns">
        <button class="chi-btn edit-btn" onclick="editChapter(${c.num})">Edit</button>
        <button class="chi-btn del" onclick="deleteChapter(${c.num})">Delete</button>
      </div>
    </div>`).join('');
}

function showToast(id,msg){
  const t=document.getElementById(id);
  t.textContent=msg; t.style.display='block';
  setTimeout(()=>t.style.display='none',3000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function confetti(){
  const cols=['#cc44ee','#e8c87a','#ff88cc','#aa00ff','#ff66bb','#ffffff'];
  for(let i=0;i<55;i++){
    const el=document.createElement('div');
    el.className='cf';
    const s=5+Math.random()*9;
    el.style.cssText=`left:${10+Math.random()*80}vw;top:${15+Math.random()*45}vh;
      width:${s}px;height:${s}px;background:${cols[Math.floor(Math.random()*cols.length)]};
      border-radius:${Math.random()>.5?'50%':'2px'};
      animation-duration:${1.3+Math.random()*1.5}s;
      animation-delay:${Math.random()*.4}s;`;
    document.body.appendChild(el);
    setTimeout(()=>el.remove(),3000);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTIL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function esc(s){
  if(!s)return'';
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}
</script>
</body>
</html>
